# üåü **CommandUtil** - –ú–æ—â–Ω–æ–µ API –¥–ª—è –∫–æ–º–∞–Ω–¥ –Ω–∞ Spigot! üöÄ

–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ **CommandUtil** ‚Äî API –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ–º–∞–Ω–¥–∞–º–∏ –Ω–∞ Spigot —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –∞–Ω–Ω–æ—Ç–∞—Ü–∏–π! üéÆ‚ú®

–° —ç—Ç–∏–º API –≤—ã —Å–º–æ–∂–µ—Ç–µ –ª–µ–≥–∫–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –≤–∞—à–µ–≥–æ –ø–ª–∞–≥–∏–Ω–∞, –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –∞—Ä–≥—É–º–µ–Ω—Ç—ã –∏ –¥–∞–∂–µ –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å –∫–∞–∂–¥–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥. üßô‚Äç‚ôÇÔ∏è

## üõ†Ô∏è **–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç** üõ†Ô∏è

### üéØ **1. –ê–Ω–Ω–æ—Ç–∞—Ü–∏—è @AsCommand ‚Äî –ú–∞–≥–∏—è –∫–æ–º–∞–Ω–¥—ã!** üéØ
–≠—Ç–∞ –∞–Ω–Ω–æ—Ç–∞—Ü–∏—è —è–≤–ª—è–µ—Ç—Å—è –æ—Å–Ω–æ–≤–æ–π –≤–∞—à–µ–≥–æ –∫–ª–∞—Å—Å–∞ –∫–æ–º–∞–Ω–¥—ã –∏ –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤–∞–º –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –µ–≥–æ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:
- `name`: –∏–º—è –∫–æ–º–∞–Ω–¥—ã.
- `args`: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é -1, —á—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç –ª—é–±–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ).
- `permission`: –ø—Ä–∞–≤–∞, –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–º–∞–Ω–¥—ã.
- `onlyPlayer`: –∫–æ–º–∞–Ω–¥–∞ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–∞ —Ç–æ–ª—å–∫–æ –∏–≥—Ä–æ–∫–∞–º.
- `aliases`: –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –∏–º–µ–Ω–∞ –¥–ª—è –∫–æ–º–∞–Ω–¥—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å–æ–∫—Ä–∞—â–µ–Ω–∏—è).

**–ü—Ä–∏–º–µ—Ä**:
```java
@AsCommand(name = "teleport", permission = "teleport:use", aliases = {"tp", "teleportPlayer"}, args = 4)
```

### üìú **2. –ê–Ω–Ω–æ—Ç–∞—Ü–∏—è @Messages ‚Äî –í–∞—à–∏ –º–∞–≥–∏—á–µ—Å–∫–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è!** üìú
–≠—Ç–∞ –∞–Ω–Ω–æ—Ç–∞—Ü–∏—è –Ω—É–∂–Ω–∞ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ—è–≤–ª—è—é—Ç—Å—è –ø—Ä–∏:

- **onlyPlayer**: –ø—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ–±—ã –∫–æ–º–∞–Ω–¥–∞ –≤—ã–ø–æ–ª–Ω—è–ª–∞—Å—å —Ç–æ–ª—å–∫–æ –∏–≥—Ä–æ–∫–æ–º.
- **exceptionMessage**: —Å–æ–æ–±—â–µ–Ω–∏–µ –æ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤.
- **permission**: —Å–æ–æ–±—â–µ–Ω–∏–µ, –µ—Å–ª–∏ —É –∏–≥—Ä–æ–∫–∞ –Ω–µ—Ç –ø—Ä–∞–≤ –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã.

**–ü—Ä–∏–º–µ—Ä**:
```java
@Messages(exceptionMessage = "/teleport <player> <x> <y> <z>", onlyPlayer = "–¢–æ–ª—å–∫–æ –¥–ª—è –∏–≥—Ä–æ–∫–æ–≤!")
```

### üìö **3. –ê–Ω–Ω–æ—Ç–∞—Ü–∏—è @HelpCommand ‚Äî –ü–æ–º–æ—â—å, –∫–æ–≥–¥–∞ —Ç—ã –≤ –±–µ–¥–µ!** üìö
–í—ã –º–æ–∂–µ—Ç–µ –¥–æ–±–∞–≤–∏—Ç—å –∫–æ–º–∞–Ω–¥—É `/mycmd help`, –∫–æ—Ç–æ—Ä–∞—è –±—É–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–±–∏—Ä–∞—Ç—å –≤—Å–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã —Å –∞–Ω–Ω–æ—Ç–∞—Ü–∏–µ–π **@Description** –∏ –≤—ã–≤–æ–¥–∏—Ç—å –∏—Ö —Å–ø—Ä–∞–≤–∫—É.

- **–ú–µ—Ç–æ–¥ `sendHelp()`**: –≤–Ω—É—Ç—Ä–∏ –≤–∞—à–µ–≥–æ –∫–ª–∞—Å—Å–∞ –∫–æ–º–∞–Ω–¥—ã –≤—ã –¥–æ–ª–∂–Ω—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–µ—Ç–æ–¥ `sendHelp()` –≤ –¥–µ—Ñ–æ–ª—Ç–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ `onCommand`. –≠—Ç–æ—Ç –º–µ—Ç–æ–¥ –±—É–¥–µ—Ç –≤—ã–≤–æ–¥–∏—Ç—å —Å–ø—Ä–∞–≤–∫—É –ø–æ –≤—Å–µ–º –¥–æ—Å—Ç—É–ø–Ω—ã–º –∫–æ–º–∞–Ω–¥–∞–º —Å –∞–Ω–Ω–æ—Ç–∞—Ü–∏–µ–π **HelpCommand**.
- –ï—Å–ª–∏ –Ω–∞ –∫–ª–∞—Å—Å–µ –∫–æ–º–∞–Ω–¥—ã –Ω–µ—Ç –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏ **HelpCommand**, –±—É–¥–µ—Ç –≤—ã–±—Ä–æ—à–µ–Ω–æ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ: `Use method sendHelp can only with annotation HelpCommand`.
- **–í–∞–∂–Ω–æ!** –ö–ª–∞—Å—Å —Å –∞–Ω–Ω–æ—Ç–∞—Ü–∏–µ–π **HelpCommand** –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å –∞–Ω–Ω–æ—Ç–∞—Ü–∏—é **@AsCommand**, –∏–Ω–∞—á–µ –±—É–¥–µ—Ç –≤—ã–±—Ä–æ—à–µ–Ω–æ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ: `Annotation HelpCommand can use only with annotation AsCommand`.

**–ü—Ä–∏–º–µ—Ä**:
```java
@AsCommand(name = "help", permission = "help:use", args = 0)
@HelpCommand
public class HelpCommandClass extends AbstractCommand {
    @Override
    public boolean onCommand(CommandSender sender, String[] args) {
        sendHelp();  // –ú–µ—Ç–æ–¥, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∫–∞–∂–µ—Ç —Å–ø—Ä–∞–≤–∫—É –ø–æ –≤—Å–µ–º –¥–æ—Å—Ç—É–ø–Ω—ã–º –∫–æ–º–∞–Ω–¥–∞–º
        return true;
    }
}
```

### üìù **4. –ê–Ω–Ω–æ—Ç–∞—Ü–∏—è @Logging ‚Äî –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –º–∞–≥–∏—á–µ—Å–∫–∏—Ö —Å–æ–±—ã—Ç–∏–π!** üìù
–î–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∫–æ–º–∞–Ω–¥ –¥–æ–±–∞–≤—å—Ç–µ –∞–Ω–Ω–æ—Ç–∞—Ü–∏—é **@Logging**. –õ–æ–≥–∏ –±—É–¥—É—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø–∏—Å—ã–≤–∞—Ç—å—Å—è –≤ —Ñ–∞–π–ª, —É–∫–∞–∑–∞–Ω–Ω—ã–π –≤ –ø—É—Ç–∏.

- **format**: —Å—Ç—Ä–æ–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∞ –¥–ª—è –∑–∞–ø–∏—Å–∏ –ª–æ–≥–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `"[<time>] player <sender> send command <command> with args <args>"`).
- **path**: –ø—É—Ç—å, –∫—É–¥–∞ –±—É–¥–µ—Ç –∑–∞–ø–∏—Å—ã–≤–∞—Ç—å—Å—è –ª–æ–≥ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `"commandLogs/logging.txt"`).

**–ü—Ä–∏–º–µ—Ä**:
```java
@AsCommand(name = "teleport", permission = "teleport:use", args = 4)
@Logging(format = "[<time>] Player <sender> used /teleport with args <args>", path = "logs/teleport_log.txt")
public class TeleportCommand extends AbstractCommand {
    @Override
    public boolean onCommand(CommandSender sender, String[] args) {
        // –í–∞—à –∫–æ–¥ –∫–æ–º–∞–Ω–¥—ã
        return true;
    }
}
```
### ‚öôÔ∏è **5. –ú–µ—Ç–æ–¥—ã –≤ AbstractCommand ‚Äî –í–∞—à–∏ –≤–µ—Ä–Ω—ã–µ –ø–æ–º–æ—â–Ω–∏–∫–∏!** ‚öôÔ∏è
–ú–µ—Ç–æ–¥—ã, –∫–æ—Ç–æ—Ä—ã–µ –¥–µ–ª–∞—é—Ç –≤–∞—à –∫–æ–¥ –ø—Ä–æ—â–µ –∏ —É–¥–æ–±–Ω–µ–µ:

- **`registerArgument(String[] args)`** ‚Äî –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–µ –∫–æ–º–∞–Ω–¥—ã.
- **`getArgument(String name)`** ‚Äî –ü–æ–ª—É—á–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è –∞—Ä–≥—É–º–µ–Ω—Ç–∞ –ø–æ –µ–≥–æ –∏–º–µ–Ω–∏.
- **`getRange(int start, int end, boolean space)`** ‚Äî –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∏–∞–ø–∞–∑–æ–Ω–∞ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤. –ü–∞—Ä–∞–º–µ—Ç—Ä `space` —É–∫–∞–∑—ã–≤–∞–µ—Ç, –±—É–¥–µ—Ç –ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω –ø—Ä–æ–±–µ–ª –º–µ–∂–¥—É –∞—Ä–≥—É–º–µ–Ω—Ç–∞–º–∏.
- **`getArgumentQueue`** ‚Äî –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—á–µ—Ä–µ–¥—å—é –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ –¥–ª—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–≥–æ –∏—Ö –∏–∑–≤–ª–µ—á–µ–Ω–∏—è.

**–ü—Ä–∏–º–µ—Ä**:
```java
@AsCommand(name = "teleport", args = 4)
@Messages(exceptionMessage = "/teleport <player> <x> <y> <z>")
public class TeleportCommand extends AbstractCommand {

    public TeleportCommand() {
        registerArgument("player", "x", "y", "z"); // –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤
    }

    @Override
    public boolean onCommand(CommandSender sender, String[] args) {
        // –ü–æ–ª—É—á–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏–π –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤
        String player = getArgument("player").getUnsafe(); // –ë–µ–∑ Optional
        int x = getArgument("x").getArgument(Integer.class);
        int y = getArgument("y").getArgument(Integer.class);
        int z = getArgument("z").getArgument(Integer.class);

        // –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –¥–∏–∞–ø–∞–∑–æ–Ω–∞ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤
        String coordinates = getRange(1, 3, true); // –í–µ—Ä–Ω–µ—Ç "x y z"

        // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞—Ä–≥—É–º–µ–Ω—Ç–∞–º–∏ —á–µ—Ä–µ–∑ –æ—á–µ—Ä–µ–¥—å
        ArgumentQueue argumentQueue = getArgumentQueue("player", "x", "y", "z");
        argumentQueue.execute((queue) -> {
            String playerName = queue.poll();
            int posX = queue.poll(Integer.class);
            int posY = queue.poll(Integer.class);
            int posZ = queue.poll(Integer.class);
            // –í–∞—à –∫–æ–¥ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤
        });

        return true;
    }
}
```

### üîß **–ö–∞–∫ —ç—Ç–æ –ø–æ–¥–∫–ª—é—á–∏—Ç—å –≤ —Å–≤–æ–µ–º –ø–ª–∞–≥–∏–Ω–µ** üîß

–ß—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **CommandUtil** –≤ –≤–∞—à–µ–º –ø–ª–∞–≥–∏–Ω–µ, –ø—Ä–æ—Å—Ç–æ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ –∞–¥–∞–ø—Ç–µ—Ä –≤ –º–µ—Ç–æ–¥–µ `onEnable`:

```java
@Override
public void onEnable() {
    new ClassFinder("ru.optimus.commands.commands", this).register();
}
```

### üìå **–ó–∞–∫–ª—é—á–µ–Ω–∏–µ** üìå

**CommandUtil** ‚Äî —ç—Ç–æ –Ω–µ –ø—Ä–æ—Å—Ç–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∫–æ–º–∞–Ω–¥–∞–º–∏, —ç—Ç–æ —Ü–µ–ª–∞—è –º–∞–≥–∏—è, –∫–æ—Ç–æ—Ä–∞—è –¥–µ–ª–∞–µ—Ç –≤–∞—à –∫–æ–¥ –ø—Ä–æ—â–µ, –ø–æ–Ω—è—Ç–Ω–µ–µ –∏ –∫—Ä–∞—Å–∏–≤–µ–µ! üöÄ‚ú®  

–ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –≤–æ–ø—Ä–æ—Å—ã –∏–ª–∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è, –Ω–µ —Å—Ç–µ—Å–Ω—è–π—Ç–µ—Å—å –∑–∞–¥–∞–≤–∞—Ç—å –∏—Ö. –ú—ã –≤—Å–µ–≥–¥–∞ —Ä–∞–¥—ã –ø–æ–º–æ—á—å! üí¨  

–°–ø–∞—Å–∏–±–æ –∑–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ **CommandUtil**! üíñ  
